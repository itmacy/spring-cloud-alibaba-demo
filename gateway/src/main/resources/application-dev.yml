server:
  port: 9008
spring:
  application:
    name: gateway-service
  cloud:
    nacos: # nacosæœåŠ¡æ³¨å†Œä¸å‘ç°
      server-addr: 127.0.0.1:8848 # nacosæœåŠ¡å™¨åœ°å€
    gateway: # gatewayé…ç½®
      routes:
        - id: order_route # è·¯ç”±çš„å”¯ä¸€æ ‡è¯†
          uri: lb://stock-service # éœ€è¦è½¬å‘åˆ°çš„åœ°å€,lb:ä½¿ç”¨nacosä¸­æœ¬åœ°è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œstock-service:éœ€è¦è½¬å‘çš„æœåŠ¡å
          predicates: # æ–­è¨€è§„åˆ™ï¼Œç”¨äºè·¯ç”±è§„åˆ™çš„åŒ¹é…
            - Path=/stock-service/**
            # ä¾‹å¦‚ç”±http://localhost:9008/stock-service/stock/deduct è·¯ç”±åˆ°ğŸ‘‡
            # http://localhost:9100/stock-service/stock/deduct
          filters:
            - StripPrefix=1 # è½¬å‘ä¹‹å‰å»é™¤ç¬¬ä¸€å±‚è·¯å¾„
            # http://localhost:9100/stock/deduct
#      discovery:
#        locator:
#          enabled: true # å¼€å¯è‡ªåŠ¨è¯†åˆ«nacosæœåŠ¡ï¼Œå°±ä¸éœ€è¦å†é…ç½®routes
      # è·¨åŸŸé…ç½®
#      globalcors:
#        cors-configurations:
#          '[/**]': # å…è®¸è·¨åŸŸçš„èµ„æº
#            allowedOrigins: "*" # è·¨åŸŸçš„æ¥æº
#            allowedMethods:
#              - GET
#              - POST
#              - DELETE
#              - PUT
#              - OPTION
    sentinel:
      transport:
        dashboard: 127.0.0.1:9090 # é…ç½®sentinel dashboardåœ°å€
      # è‡ªå®šä¹‰å¼‚å¸¸
#      scg:
#        fallback:
#          mode: response
#          response-body: '{"code": 403, "message": "é™æµäº†"}'